<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel ID - ç©¶æ¥µã®æ—…è¨ºæ–­</title>
    <link rel="icon" href="./images/logo.png">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9SCPDPG40L"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-9SCPDPG40L');
    </script>

    <meta property="og:title" content="Travel ID Diagnosis">
    <meta property="og:description" content="Discover your true travel personality. / ã‚ãªãŸã®æ—…ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’13å•ã§è§£æ˜ã—ã¾ã™ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://travel-id-lab.github.io/travel-id-app/">
    <meta property="og:image" content="https://travel-id-lab.github.io/travel-id-app/images/logo.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://travel-id-lab.github.io/travel-id-app/images/logo.png">

    <style>
        :root {
            --primary: #3b82f6;
            --accent: #8b5cf6;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --x-color: #000000;
            --discord-color: #5865F2;
            --danger: #ef4444;
            --match: #db2777;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", YuGothic, "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN W3", Meiryo, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            background: var(--card);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        /* è¨€èªã‚¹ã‚¤ãƒƒãƒ */
        .lang-switch {
            position: absolute;
            top: 20px; right: 20px;
            background: #f1f5f9; padding: 5px 10px; border-radius: 20px;
            font-size: 12px; font-weight: bold; cursor: pointer;
            border: 1px solid #e2e8f0; color: #64748b;
        }

        h1 { font-size: 24px; margin-bottom: 10px; font-weight: 800; margin-top: 10px; }
        h2 { font-size: 16px; color: #64748b; margin-bottom: 30px; font-weight: normal; }
        
        .app-logo { display: block; margin: 20px auto; width: 140px; height: auto; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); }

        /* Quiz UI */
        .options-list { text-align: left; display: flex; flex-direction: column; gap: 12px; margin-bottom: 30px; }
        .option-label { display: flex; align-items: center; padding: 15px; border: 2px solid #e2e8f0; border-radius: 12px; cursor: pointer; transition: all 0.2s; }
        .option-label:hover { background-color: #f8fafc; border-color: #cbd5e1; }
        .option-label.selected { border-color: var(--primary); background-color: #eff6ff; }
        .option-radio { margin-right: 15px; transform: scale(1.2); accent-color: var(--primary); }

        .nav-buttons { display: flex; justify-content: space-between; gap: 15px; }
        .nav-btn { flex: 1; padding: 14px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-back { background: #e2e8f0; color: #64748b; }
        .btn-next { background: var(--primary); color: white; }
        .btn-next:disabled { opacity: 0.5; cursor: not-allowed; }

        .question-text { font-size: 18px; font-weight: 700; margin-bottom: 20px; min-height: 60px; display: flex; align-items: center; justify-content: center; }

        /* Result Styles */
        .image-container { width: 100%; height: 250px; border-radius: 16px; overflow: hidden; margin-bottom: 20px; background-color: #e2e8f0; }
        .result-img { width: 100%; height: 100%; object-fit: cover; }
        .result-type-title { font-size: 18px; font-weight: bold; color: var(--primary); margin-bottom: 5px; }
        .result-id { font-size: 42px; font-weight: 900; letter-spacing: 4px; margin: 0 0 20px 0; background: linear-gradient(45deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Match Section (Core Feature) */
        .match-box {
            background: linear-gradient(135deg, #fdf2f8, #fce7f3);
            border: 2px solid #fbcfe8;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
        }
        .match-title { font-size: 12px; font-weight: bold; color: var(--match); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .match-content { font-size: 20px; font-weight: 900; color: #be185d; margin-bottom: 5px; }
        .match-desc { font-size: 13px; color: #9d174d; line-height: 1.4; }

        .info-box { background: #f1f5f9; border-radius: 16px; padding: 20px; text-align: left; margin-bottom: 15px; border: 1px solid #e2e8f0; }
        .info-title { font-size: 12px; font-weight: bold; color: #64748b; margin-bottom: 5px; text-transform: uppercase; }
        .info-content { font-size: 16px; font-weight: bold; color: #334155; }

        /* NG Box (Milder) */
        .ng-box { background: #fef2f2; border: 2px solid #fecaca; border-radius: 16px; padding: 20px; text-align: left; margin-bottom: 15px; }
        .ng-title { font-size: 12px; font-weight: bold; color: var(--danger); margin-bottom: 5px; text-transform: uppercase; }
        .ng-content { font-size: 16px; font-weight: bold; color: #b91c1c; }
        .ng-reason { font-size: 13px; color: #7f1d1d; margin-top: 5px; line-height: 1.5; }

        /* Accordion for Details */
        .details-toggle {
            background: none; border: none; color: #64748b; font-size: 14px; font-weight: bold;
            cursor: pointer; margin: 10px 0; text-decoration: underline;
        }
        .details-content { display: none; margin-top: 15px; animation: fadeIn 0.4s ease; }
        .details-content.open { display: block; }

        .spectrum-container { margin-top: 10px; text-align: left; padding-top: 10px; border-top: 1px dashed #e2e8f0;}
        .axis-row { margin-bottom: 25px; }
        .axis-labels { display: flex; justify-content: space-between; font-size: 12px; font-weight: 700; margin-bottom: 8px; color: #94a3b8; }
        .bar-bg { height: 10px; background: #e2e8f0; border-radius: 5px; position: relative; }
        .dot { width: 18px; height: 18px; background: white; border: 4px solid var(--primary); border-radius: 50%; position: absolute; top: 50%; transform: translate(-50%, -50%); transition: left 1s cubic-bezier(0.34, 1.56, 0.64, 1); left: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .progress-bar { height: 6px; background: #e2e8f0; margin-bottom: 20px; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        button.start-btn { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; border: none; font-size: 20px; padding: 20px 40px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); width: 100%; margin-top: 20px; border-radius: 16px; font-weight: bold; cursor: pointer; }
        
        .feedback-area { margin-top: 40px; border-top: 1px dashed #e2e8f0; padding-top: 20px; }
        .feedback-link { display: inline-block; background: #fff; color: #64748b; border: 1px solid #cbd5e1; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-size: 12px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container" id="app">
    <div class="lang-switch" onclick="toggleLanguage()" id="lang-btn">ğŸ‡¯ğŸ‡µ JP / ğŸ‡ºğŸ‡¸ EN</div>

    <div id="start-screen">
        <h1 id="start-title">Travel ID è¨ºæ–­</h1>
        <h2 id="start-subtitle">ã‚ãªãŸã®æ—…ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’<br>13å•ã§è§£æ˜ã—ã¾ã™ã€‚</h2>
        <img src="./images/logo.png" alt="Travel ID Logo" class="app-logo">
        <button class="start-btn" onclick="startQuiz()" id="start-btn-text">è¨ºæ–­ã‚’å§‹ã‚ã‚‹</button>
        <p style="font-size: 12px; color: #94a3b8; margin-top: 30px;">Ver 12.0: Match & Balance</p>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div class="question-text" id="question-text">Loading...</div>
        <div class="options-list" id="options-container"></div>
        <div class="nav-buttons">
            <button class="nav-btn btn-back" onclick="prevQuestion()" id="btn-back">æˆ»ã‚‹</button>
            <button class="nav-btn btn-next" onclick="nextQuestion()" id="btn-next" disabled>æ¬¡ã¸</button>
        </div>
    </div>

    <div id="pre-result-screen" class="hidden fade-in">
        <h1 id="pre-title">è¨ºæ–­å®Œäº†ï¼</h1>
        <p id="pre-subtitle">æœ€å¾Œã®ä»•ä¸Šã’ã§ã™ã€‚<br>MBTIã‚’è¿½åŠ ã™ã‚‹ã¨ç²¾åº¦ãŒä¸ŠãŒã‚Šã¾ã™ã€‚</p>
        <div style="margin: 20px 0; text-align: left;">
            <label style="font-size: 14px; font-weight: bold; color: #64748b;">MBTI (ä»»æ„):</label>
            <select id="mbti-select" style="width: 100%; padding: 12px; margin-top: 5px; border-radius: 12px; border: 2px solid #e2e8f0; background: #f8fafc;">
                <option value="">ã‚ã‹ã‚‰ãªã„ / Skip</option>
                <option value="INTJ">INTJ</option><option value="INTP">INTP</option><option value="ENTJ">ENTJ</option><option value="ENTP">ENTP</option>
                <option value="INFJ">INFJ</option><option value="INFP">INFP</option><option value="ENFJ">ENFJ</option><option value="ENFP">ENFP</option>
                <option value="ISTJ">ISTJ</option><option value="ISFJ">ISFJ</option><option value="ESTJ">ESTJ</option><option value="ESFJ">ESFJ</option>
                <option value="ISTP">ISTP</option><option value="ISFP">ISFP</option><option value="ESTP">ESTP</option><option value="ESFP">ESFP</option>
            </select>
        </div>
        <button class="start-btn" onclick="calcAndShowResults()" id="show-result-btn-text">çµæœã‚’è¦‹ã‚‹</button>
    </div>

    <div id="result-screen" class="hidden fade-in">
        <div class="image-container"><img id="result-image" class="result-img" src="" alt="Result"></div>
        <div class="result-type-title" id="result-title"></div>
        <div class="result-id" id="result-kanji"></div>
        <div class="result-description" id="result-desc-text"></div>

        <div class="match-box">
            <div class="match-title" id="label-match">â¤ï¸ æœ€é«˜ã®æ—…ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼</div>
            <div class="match-content" id="result-match"></div>
            <div class="match-desc" id="match-reason-text"></div>
        </div>

        <div class="info-box">
            <div class="info-title" id="label-rec">ğŸ—ºï¸ ãŠã™ã™ã‚ã®æ—…å…ˆ</div>
            <div class="info-content" id="result-rec"></div>
        </div>

        <div class="ng-box">
            <div class="ng-title" id="label-ng">ğŸ’€ ã‚ãªãŸã«ã¨ã£ã¦ã®åœ°ç„</div>
            <div class="ng-content" id="result-ng-place"></div>
            <div class="ng-reason" id="result-ng-reason"></div>
        </div>
        
        <button class="details-toggle" onclick="toggleDetails()" id="btn-details">â–¼ è©³ç´°ã‚¹ã‚³ã‚¢åˆ†æã‚’è¦‹ã‚‹</button>
        <div class="details-content" id="details-section">
            <div class="spectrum-container">
                <div class="axis-row"><div class="axis-labels"><span id="axis-clean">æ¸…æ½” (Clean)</span><span id="axis-mud">æ··æ²Œ (Deep)</span></div><div class="bar-bg"><div class="dot" id="dot-1"></div></div></div>
                <div class="axis-row"><div class="axis-labels"><span id="axis-safe">å®‰å…¨ (Safe)</span><span id="axis-active">æŒ‘æˆ¦ (Active)</span></div><div class="bar-bg"><div class="dot" id="dot-2"></div></div></div>
                <div class="axis-row"><div class="axis-labels"><span id="axis-solo">ã‚½ãƒ­ (Solo)</span><span id="axis-social">äº¤æµ (Social)</span></div><div class="bar-bg"><div class="dot" id="dot-3"></div></div></div>
                <div class="axis-row"><div class="axis-labels"><span id="axis-order">è¦å¾‹ (Order)</span><span id="axis-flow">æŸ”è»Ÿ (Flow)</span></div><div class="bar-bg"><div class="dot" id="dot-4"></div></div></div>
            </div>
            <div id="neutral-advice" style="font-size:12px; color:#64748b; margin-top:10px;"></div>
        </div>

        <div class="feedback-area">
            <p style="font-size: 13px; color: #64748b; margin-bottom: 10px;" id="feedback-msg">é–‹ç™ºè€…ã®åŠ±ã¿ã«ãªã‚Šã¾ã™ï¼<br>ãƒã‚°å ±å‘Šãƒ»æ”¹å–„æ¡ˆã¯ã“ã¡ã‚‰ï¼ˆåŒ¿åï¼‰</p>
            <a href="https://forms.google.com/your-form-url" target="_blank" class="feedback-link" id="feedback-btn">ğŸ“ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ã‚‹</a>
        </div>
        <button onclick="location.reload()" style="margin-top: 30px; width: 100%; background: #1e293b; color: white; border: none; padding: 15px; border-radius: 12px;" id="btn-top">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
    </div>
</div>

<script>
    let currentLang = 'ja';
    const translations = {
        ja: {
            title: "Travel ID è¨ºæ–­", subtitle: "ã‚ãªãŸã®æ—…ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’<br>13å•ã§è§£æ˜ã—ã¾ã™ã€‚",
            startBtn: "è¨ºæ–­ã‚’å§‹ã‚ã‚‹", btnNext: "æ¬¡ã¸", btnBack: "æˆ»ã‚‹",
            labelRec: "ğŸ—ºï¸ ãŠã™ã™ã‚ã®æ—…å…ˆ", labelNg: "ğŸ’€ ã‚ãªãŸã«ã¨ã£ã¦ã®åœ°ç„", labelMatch: "â¤ï¸ æœ€é«˜ã®æ—…ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
            preTitle: "è¨ºæ–­å®Œäº†ï¼", preSubtitle: "æœ€å¾Œã®ä»•ä¸Šã’ã§ã™ã€‚<br>MBTIã‚’è¿½åŠ ã™ã‚‹ã¨ç²¾åº¦ãŒä¸ŠãŒã‚Šã¾ã™ã€‚",
            showResultBtn: "çµæœã‚’è¦‹ã‚‹", btnTop: "ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹", btnDetails: "â–¼ è©³ç´°ã‚¹ã‚³ã‚¢åˆ†æã‚’è¦‹ã‚‹",
            feedbackMsg: "é–‹ç™ºè€…ã®åŠ±ã¿ã«ãªã‚Šã¾ã™ï¼<br>ãƒã‚°å ±å‘Šãƒ»æ”¹å–„æ¡ˆã¯ã“ã¡ã‚‰ï¼ˆåŒ¿åï¼‰", feedbackBtn: "ğŸ“ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ã‚‹",
            axes: { clean: "æ¸…æ½”ãƒ»å¿«é© (æµ„)", mud: "æ··æ²Œãƒ»ãƒ‡ã‚£ãƒ¼ãƒ— (æ³¥)", safe: "å®‰å…¨ãƒ»ãƒªãƒ©ãƒƒã‚¯ã‚¹ (å®‰)", active: "æŒ‘æˆ¦ãƒ»ã‚¢ã‚¯ãƒ†ã‚£ãƒ– (æ”»)", solo: "ã‚½ãƒ­ãƒ»å†…çœ (å­¤)", social: "äº¤æµãƒ»ãƒ¯ã‚¤ãƒ¯ã‚¤ (å…±)", order: "è¦å¾‹ãƒ»è¨ˆç”»çš„ (å¾‹)", flow: "æŸ”è»Ÿãƒ»è¡Œãå½“ãŸã‚Šã°ã£ãŸã‚Š (éŠ)" }
        },
        en: {
            title: "Travel ID Diagnosis", subtitle: "Discover your true travel style.",
            startBtn: "Start Quiz", btnNext: "Next", btnBack: "Back",
            labelRec: "ğŸ—ºï¸ Recommended", labelNg: "ğŸ’€ Your Hell (Avoid!)", labelMatch: "â¤ï¸ Best Travel Buddy",
            preTitle: "Almost Done!", preSubtitle: "Add MBTI for better accuracy.",
            showResultBtn: "See Results", btnTop: "Back to Top", btnDetails: "â–¼ View Detailed Analysis",
            feedbackMsg: "Have feedback?", feedbackBtn: "ğŸ“ Send Feedback",
            axes: { clean: "Clean", mud: "Deep", safe: "Safe", active: "Active", solo: "Solo", social: "Social", order: "Order", flow: "Flow" }
        }
    };

    const resultData = {
        "æ³¥æ”»å­¤éŠ": { 
            ja: { title: "å­¤é«˜ã®ãƒãƒ¼ãƒ‰ã‚³ã‚¢å†’é™ºå®¶", desc: "å¿«é©ã•ã‚ˆã‚Šç”Ÿã®å®Ÿæ„Ÿã€‚ç›´æ„Ÿã§å‹•ãã€‚", rec: "ã‚¨ãƒã‚ªãƒ”ã‚¢ï¼ˆãƒ€ãƒŠã‚­ãƒ«ç ‚æ¼ ï¼‰", match: "æ³¥æ”»å­¤å¾‹", matchReason: "ã‚ãªãŸã®ç„¡è¬€ãªå†’é™ºã‚’ã€å½¼ã‚‰ãŒã€Œè¨ˆç”»ã€ã¨ã—ã¦æˆç«‹ã•ã›ã¦ãã‚Œã¾ã™ã€‚", ng: "ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ã‚·ãƒ–ãƒ»ãƒªã‚¾ãƒ¼ãƒˆ", ngReason: "ã€Œç®¡ç†ã•ã‚ŒãŸå¿«é©ã•ã€ã¯ã€ã‚ãªãŸã«ã¨ã£ã¦é€€å±ˆã¨ã„ã†åã®æ‹·å•ã§ã™ã€‚" },
            en: { title: "The Lone Hardcore Adventurer", desc: "Raw reality over comfort.", rec: "Ethiopia", match: "æ³¥æ”»å­¤å¾‹", matchReason: "They turn your reckless adventures into feasible plans.", ng: "All-Inclusive Resorts", ngReason: "Managed comfort is boredom torture for you." }
        },
        "æ³¥æ”»å­¤å¾‹": { 
            ja: { title: "ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãªæ¢æ¤œå®¶", desc: "éé…·ãªç›®æ¨™ã¸ã®æº–å‚™ã‚’æ€ ã‚‰ãªã„ã€‚", rec: "ãƒãƒ‘ãƒ¼ãƒ«ï¼ˆã‚¨ãƒ™ãƒ¬ã‚¹ãƒˆè¡—é“ï¼‰", match: "æ³¥æ”»å­¤éŠ", matchReason: "å½¼ã‚‰ã®çªé£›ãªç™ºæƒ³ãŒã€ã‚ãªãŸã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«æ–°ã—ã„é¢¨ã‚’å¹ãè¾¼ã¿ã¾ã™ã€‚", ng: "æ˜ ãˆé‡è¦–ã®ãƒŠã‚¤ãƒˆãƒ—ãƒ¼ãƒ«", ngReason: "ã€Œæ„å‘³ã®ãªã„æ¶ˆè²»ã€ã«è€ãˆã‚‰ã‚Œãšã€é–‹å§‹5åˆ†ã§å¸°ã‚ŠãŸããªã‚Šã¾ã™ã€‚" },
            en: { title: "The Stoic Explorer", desc: "Meticulous prep for tough goals.", rec: "Nepal", match: "æ³¥æ”»å­¤éŠ", matchReason: "Their wild ideas bring fresh air to your missions.", ng: "Trendy Night Pools", ngReason: "Meaningless consumption stresses you out." }
        },
        "æ³¥æ”»å…±éŠ": { 
            ja: { title: "ãŠç¥­ã‚Šé¨’ãã®ã‚µãƒã‚¤ãƒãƒ¼", desc: "æ··æ²Œã¨é¨’éŸ³ã‚’æ„›ã™ã‚‹ã€‚", rec: "ãƒ–ãƒ©ã‚¸ãƒ«ï¼ˆãƒªã‚ªã®ã‚«ãƒ¼ãƒ‹ãƒãƒ«ï¼‰", match: "æ³¥æ”»å…±å¾‹", matchReason: "å½¼ã‚‰ãŒãƒªã‚¹ã‚¯ç®¡ç†ã—ã¦ãã‚Œã‚‹ã®ã§ã€ã‚ãªãŸã¯å®‰å¿ƒã—ã¦æš´ã‚Œã‚‰ã‚Œã¾ã™ã€‚", ng: "å±±å¥¥ã®ç¦…å¯ºã§ç‘æƒ³", ngReason: "ã€Œé™å¯‚ã€ã¨ã€Œè¦å‰‡ã€ã¯ã€ã‚ãªãŸã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¥ªã†æ¯’ã§ã™ã€‚" },
            en: { title: "The Party Survivor", desc: "Loves chaos and noise.", rec: "Brazil", match: "æ³¥æ”»å…±å¾‹", matchReason: "They manage the risks so you can party safely.", ng: "Silent Meditation Retreat", ngReason: "Silence and rules drain your energy." }
        },
        "æ³¥æ”»å…±å¾‹": { 
            ja: { title: "éé…·ãƒ„ã‚¢ãƒ¼ã®ç†±è¡€ãƒªãƒ¼ãƒ€ãƒ¼", desc: "ãƒãƒ¼ãƒ‰ãªæ—…ã‚’çµ±ç‡ã™ã‚‹ã€‚", rec: "ãƒšãƒ«ãƒ¼ï¼ˆã‚¤ãƒ³ã‚«é“ï¼‰", match: "æ³¥æ”»å…±éŠ", matchReason: "ã‚ãªãŸã®å®Œç’§ãªè¨ˆç”»ã«ã€å½¼ã‚‰ãŒæœ€é«˜ã®ç››ã‚Šä¸ŠãŒã‚Šã‚’æä¾›ã—ã¾ã™ã€‚", ng: "è‡ªç”±è¡Œå‹•ã®ã¿ã®ãƒ“ãƒ¼ãƒ", ngReason: "ã€Œä½•ã‚‚è¨ˆç”»ãŒãªã„ã€çŠ¶æ…‹ã«ã‚¤ãƒ©ã‚¤ãƒ©ã—ã€å‹æ‰‹ã«ä»•åˆ‡ã‚Šå§‹ã‚ã¦ã—ã¾ã„ã¾ã™ã€‚" },
            en: { title: "The Expedition Leader", desc: "Leads hardcore trips.", rec: "Peru", match: "æ³¥æ”»å…±éŠ", matchReason: "They bring the hype to your perfect plans.", ng: "Unplanned Beach Day", ngReason: "Lack of plan frustrates you." }
        },
        "æ³¥å®‰å­¤éŠ": { 
            ja: { title: "ãƒ‡ã‚£ãƒ¼ãƒ—ãªè¡—ã®æ”¾æµªè©©äºº", desc: "è·¯åœ°è£ã®ç”Ÿæ´»æ„Ÿã‚’æ„›ã™ã‚‹ã€‚", rec: "ãƒãƒ«ãƒˆã‚¬ãƒ«ï¼ˆãƒªã‚¹ãƒœãƒ³ï¼‰", match: "æ³¥å®‰å…±éŠ", matchReason: "å†…å‘çš„ãªã‚ãªãŸã‚’ã€å½¼ã‚‰ãŒé©åº¦ã«å¤–ã®ä¸–ç•Œã¸é€£ã‚Œå‡ºã—ã¦ãã‚Œã¾ã™ã€‚", ng: "ãƒ‰ãƒã‚¤ã®è¶…é«˜å±¤ãƒ¢ãƒ¼ãƒ«", ngReason: "ã€Œä½œã‚‰ã‚ŒãŸç…Œã³ã‚„ã‹ã•ã€ã«è™šç„¡ã‚’æ„Ÿã˜ã€å¿ƒãŒæ­»ã«ã¾ã™ã€‚" },
            en: { title: "The Wandering Poet", desc: "Loves gritty alleys.", rec: "Portugal", match: "æ³¥å®‰å…±éŠ", matchReason: "They gently drag you out to the world.", ng: "Dubai Mega Malls", ngReason: "Artificial glitz makes you feel empty." }
        },
        "æ³¥å®‰å­¤å¾‹": { 
            ja: { title: "ãƒãƒ‹ã‚¢ãƒƒã‚¯ãªç ”ç©¶è€…", desc: "ãƒ‹ãƒƒãƒãªå¯¾è±¡ã«æ²¡å…¥ã™ã‚‹ã€‚", rec: "ã‚«ãƒ³ãƒœã‚¸ã‚¢ï¼ˆãƒ™ãƒ³ãƒ¡ãƒªã‚¢ï¼‰", match: "æ³¥å®‰å…±å¾‹", matchReason: "ã‚ãªãŸã®ç ”ç©¶æ—…è¡Œã®ã‚³ã‚¹ãƒˆã‚’ã€å½¼ã‚‰ãŒåŠ‡çš„ã«ä¸‹ã’ã¦ãã‚Œã¾ã™ã€‚", ng: "ã‚¦ã‚§ãƒ¼ã‚¤ç³»ã®æ³¡ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼", ngReason: "ã€Œãƒãƒªã€ã ã‘ã§ä¸­èº«ã®ãªã„ç©ºé–“ã¯ã€ã‚ãªãŸã«ã¨ã£ã¦å®‡å®™äººã®è¥²æ¥ã¨åŒã˜ã§ã™ã€‚" },
            en: { title: "The Maniac Researcher", desc: "Immersion in niche subjects.", rec: "Cambodia", match: "æ³¥å®‰å…±å¾‹", matchReason: "They drastically lower your research trip costs.", ng: "Foam Party", ngReason: "Places with only 'vibes' confuse you." }
        },
        "æ³¥å®‰å…±éŠ": { 
            ja: { title: "ä¸‹ç”ºã®æ„›ã•ã‚Œã‚­ãƒ£ãƒ©", desc: "ç¾åœ°ã®äººã¨å³ä»²è‰¯ããªã‚‹ã€‚", rec: "ãƒ¡ã‚­ã‚·ã‚³ï¼ˆã‚ªã‚¢ãƒã‚«ï¼‰", match: "æ³¥å®‰å­¤éŠ", matchReason: "å½¼ã‚‰ã®æ·±ã„çŸ¥è­˜ãŒã€ã‚ãªãŸã®æ—…ã«æ·±ã¿ã‚’ä¸ãˆã¦ãã‚Œã¾ã™ã€‚", ng: "é«˜ç´šãƒ•ãƒ¬ãƒ³ãƒã®å€‹å®¤", ngReason: "ã€ŒãƒãƒŠãƒ¼ã€ã¨ã€Œæ²ˆé»™ã€ã«ç¸›ã‚‰ã‚Œã€ã‚ãªãŸã®è‰¯ã•ãŒå…¨æ¶ˆã—ã«ãªã‚Šã¾ã™ã€‚" },
            en: { title: "The Local's Favorite", desc: "Instant friends with locals.", rec: "Mexico", match: "æ³¥å®‰å­¤éŠ", matchReason: "Their deep knowledge adds depth to your trip.", ng: "Fine Dining Private Room", ngReason: "Manners and silence kill your charm." }
        },
        "æ³¥å®‰å…±å¾‹": { 
            ja: { title: "æ¿€å®‰ãƒ„ã‚¢ãƒ¼ã®ã—ã£ã‹ã‚Šè€…", desc: "å®‰ããƒ‡ã‚£ãƒ¼ãƒ—ã«ã€‚ç„¡é§„ã‚’å«Œã†ã€‚", rec: "ã‚¤ãƒ³ãƒ‰ï¼ˆé‰„é“ï¼‰", match: "æ³¥å®‰å­¤å¾‹", matchReason: "å½¼ã‚‰ã®ãƒãƒ‹ã‚¢ãƒƒã‚¯ãªç›®çš„ãŒã€ã‚ãªãŸã®ã€Œå®‰ãæ¿ƒãã€ã¨ã„ã†æ¬²æ±‚ã‚’æº€ãŸã—ã¾ã™ã€‚", ng: "ç©ºæ¸¯ã®ã¼ã£ãŸãã‚Šã‚¿ã‚¯ã‚·ãƒ¼", ngReason: "é‡‘é¡ãã®ã‚‚ã®ã‚ˆã‚Šã€Œã‚«ãƒ¢ã«ã•ã‚ŒãŸã€ã¨ã„ã†äº‹å®Ÿã«æ€’ã‚Šã§éœ‡ãˆã¾ã™ã€‚" },
            en: { title: "The Budget Master", desc: "Cheap and deep.", rec: "India", match: "æ³¥å®‰å­¤å¾‹", matchReason: "Their maniac goals satisfy your desire for value.", ng: "Overpriced Tourist Taxi", ngReason: "Getting ripped off makes you tremble with rage." }
        },
        "æµ„æ”»å­¤éŠ": { 
            ja: { title: "ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãªè‡ªç”±äºº", desc: "æ´—ç·´ã¨è‡ªç”±ã‚’æ„›ã™ã‚‹ã€‚", rec: "NYï¼ˆãƒ–ãƒ«ãƒƒã‚¯ãƒªãƒ³ï¼‰", match: "æµ„æ”»å­¤å¾‹", matchReason: "ãŠäº’ã„ã®ã‚»ãƒ³ã‚¹ã‚’å°Šé‡ã—ã¤ã¤ã€é©åº¦ãªè·é›¢æ„Ÿã§æ—…ãŒã§ãã¾ã™ã€‚", ng: "è¡›ç”Ÿè¦³å¿µã®ä½ã„ãƒ‰ãƒŸãƒˆãƒªãƒ¼", ngReason: "ã€Œãƒ€ãƒ‹ã€ã‚„ã€Œã‚«ãƒ“ã€ã®æ°—é…ã‚’æ„Ÿã˜ãŸç¬é–“ã€æ—…ã‚’æ¥½ã—ã‚€ã©ã“ã‚ã§ã¯ãªããªã‚Šã¾ã™ã€‚" },
            en: { title: "The Stylish Free Spirit", desc: "Loves style and freedom.", rec: "NYC", match: "æµ„æ”»å­¤å¾‹", matchReason: "You respect each other's taste and space.", ng: "Dirty Hostels", ngReason: "Hygiene issues ruin your trip instantly." }
        },
        "æµ„æ”»å­¤å¾‹": { 
            ja: { title: "å®Œç’§ä¸»ç¾©ã®çµ¶æ™¯ãƒãƒ³ã‚¿ãƒ¼", desc: "æœ€é«˜ã®ç¬é–“ã®ãŸã‚ã«å‹•ãã€‚", rec: "ã‚¢ã‚¤ã‚¹ãƒ©ãƒ³ãƒ‰", match: "æµ„æ”»å­¤éŠ", matchReason: "ã‚ãªãŸã®å®Œç’§ãªè¨ˆç”»ã«ã€å½¼ã‚‰ãŒã‚ªã‚·ãƒ£ãƒ¬ãªæŠœã‘æ„Ÿã‚’ä½œã£ã¦ãã‚Œã¾ã™ã€‚", ng: "è¡Œãå½“ãŸã‚Šã°ã£ãŸã‚Šã®é‡å®¿", ngReason: "ã€Œå……é›»ã§ããªã„ã€ã€Œã‚·ãƒ£ãƒ¯ãƒ¼ãŒãªã„ã€ç­‰ã®ä¸æ¸¬ã®äº‹æ…‹ã¯è¨±å®¹ã§ãã¾ã›ã‚“ã€‚" },
            en: { title: "The Perfectionist", desc: "Chasing the perfect shot.", rec: "Iceland", match: "æµ„æ”»å­¤éŠ", matchReason: "They add a stylish twist to your perfect plan.", ng: "Random Camping", ngReason: "You cannot tolerate unpredicted inconvenience." }
        },
        "æµ„æ”»å…±éŠ": { 
            ja: { title: "ã‚­ãƒ©ã‚­ãƒ©å¥³å­æ—…ã®ã‚«ãƒªã‚¹ãƒ", desc: "ãƒˆãƒ¬ãƒ³ãƒ‰ã¨æ˜ ãˆã‚’å·¡ã‚‹ã€‚", rec: "éŸ“å›½ï¼ˆè–æ°´æ´ï¼‰", match: "æµ„æ”»å…±å¾‹", matchReason: "å½¼ã‚‰ãŒäºˆç´„ã‚„ç§»å‹•ã‚’å®Œç’§ã«ã—ã¦ãã‚Œã‚‹ã®ã§ã€ã‚ãªãŸã¯æ’®å½±ã«é›†ä¸­ã§ãã¾ã™ã€‚", ng: "é›»æ³¢ã®ãªã„ã‚¸ãƒ£ãƒ³ã‚°ãƒ«", ngReason: "ã€Œã‚·ã‚§ã‚¢ã§ããªã„ä½“é¨“ã€ã¯ã€ã‚ãªãŸã«ã¨ã£ã¦å­˜åœ¨ã—ãªã„ã®ã¨åŒã˜ã§ã™ã€‚" },
            en: { title: "The Trendy Charisma", desc: "Trends and photos.", rec: "Korea", match: "æµ„æ”»å…±å¾‹", matchReason: "They handle logistics so you can focus on photos.", ng: "Offline Jungle", ngReason: "Experiences you can't share don't exist." }
        },
        "æµ„æ”»å…±å¾‹": { 
            ja: { title: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ãƒªã‚¾ãƒ¼ãƒˆã®å¹¹äº‹é•·", desc: "å¿«é©ã‹ã¤æ´»å‹•çš„ãªå®Œç’§ãªæ—…ã€‚", rec: "ãƒãƒ¯ã‚¤ï¼ˆã‚´ãƒ«ãƒ•ï¼‰", match: "æµ„æ”»å…±éŠ", matchReason: "ã‚ãªãŸã®è¨ˆç”»ã—ãŸæœ€é«˜ã®ãƒªã‚¾ãƒ¼ãƒˆã‚’ã€å½¼ã‚‰ãŒèª°ã‚ˆã‚Šã‚‚æ¥½ã—ã‚“ã§ãã‚Œã¾ã™ã€‚", ng: "å®‰å®¿ã®å…±åŒãƒã‚¹ãƒ«ãƒ¼ãƒ ", ngReason: "ã€Œä»–äººã®é«ªã®æ¯›ã€ã‚’è¦‹ãŸç¬é–“ã€ã‚ãªãŸã®å®Œç’§ãªæ—…ã¯çµ‚äº†ã—ã¾ã™ã€‚" },
            en: { title: "The Resort Planner", desc: "Active luxury.", rec: "Hawaii", match: "æµ„æ”»å…±éŠ", matchReason: "They enjoy your planned luxury more than anyone.", ng: "Shared Bathroom", ngReason: "Other people's mess ends your trip." }
        },
        "æµ„å®‰å­¤éŠ": { 
            ja: { title: "å„ªé›…ãªãƒ›ãƒ†ãƒ«ã‚¹ãƒ†ã‚¤æ„›å¥½å®¶", desc: "ä½•ã‚‚ã—ãªã„è´…æ²¢ã€‚", rec: "ãƒ¢ãƒ«ãƒ‡ã‚£ãƒ–", match: "æµ„å®‰å­¤å¾‹", matchReason: "ãŠäº’ã„ã«å¹²æ¸‰ã›ãšã€é™ã‹ãªæ™‚é–“ã‚’å…±æœ‰ã§ãã‚‹æœ€é«˜ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã§ã™ã€‚", ng: "å¼¾ä¸¸ãƒã‚¹ãƒ„ã‚¢ãƒ¼", ngReason: "ã€Œæœ6æ™‚é›†åˆã€ã€Œ10åˆ†ã§è¦³å…‰ã€ã¨ã„ã†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ã‚‚ã¯ã‚„æ‹·å•ã§ã™ã€‚" },
            en: { title: "The Hotel Lover", desc: "Luxury of doing nothing.", rec: "Maldives", match: "æµ„å®‰å­¤å¾‹", matchReason: "Best partner to share silence without interference.", ng: "Rushed Bus Tour", ngReason: "Tight schedules are torture for you." }
        },
        "æµ„å®‰å­¤å¾‹": { 
            ja: { title: "æ…é‡æ´¾ã®ç™’ã‚„ã—æ±‚é“è€…", desc: "å®‰å…¨ã§æ¸…æ½”ãªç™’ã‚„ã—ã€‚", rec: "ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰", match: "æµ„å®‰å…±å¾‹", matchReason: "ãƒªã‚¹ã‚¯ç®¡ç†ã®ãƒ¬ãƒ™ãƒ«ãŒåŒã˜ãªã®ã§ã€ä½™è¨ˆãªã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã¾ã›ã‚“ã€‚", ng: "ã‚¤ãƒ³ãƒ‰ã®ãƒãƒ©ãƒŠã‚·", ngReason: "ã€Œæ··æ²Œã€ã€Œä¸è¡›ç”Ÿã€ã€Œå®¢å¼•ãã€ã®3é€£ã‚³ãƒ³ãƒœã§ã€ç©ºæ¸¯ã‹ã‚‰å‡ºã‚‰ã‚Œãªããªã‚Šã¾ã™ã€‚" },
            en: { title: "The Cautious Healer", desc: "Safe and clean healing.", rec: "Finland", match: "æµ„å®‰å…±å¾‹", matchReason: "Same risk management level means no stress.", ng: "Varanasi, India", ngReason: "Chaos and hygiene issues will make you hide." }
        },
        "æµ„å®‰å…±éŠ": { 
            ja: { title: "ã®ã‚“ã³ã‚Šæ¸©æ³‰æ—…è¡Œã‚°ãƒ«ãƒ¼ãƒ—", desc: "æ¸…æ½”ãªå®¿ã§ã¾ã£ãŸã‚Šã€‚", rec: "å°æ¹¾ï¼ˆåŒ—æŠ•æ¸©æ³‰ï¼‰", match: "æµ„å®‰å­¤éŠ", matchReason: "å½¼ã‚‰ã®çŸ¥ã‚‹ã€Œéš ã‚Œå®¶å®¿ã€ãŒã€ã‚ãªãŸã®æ—…ã‚’ãƒ¯ãƒ³ãƒ©ãƒ³ã‚¯ä¸Šã’ã¦ãã‚Œã¾ã™ã€‚", ng: "ã‚¹ãƒ©ãƒ è¡—ã®ã‚¹ã‚¿ãƒ‡ã‚£ãƒ„ã‚¢ãƒ¼", ngReason: "ã€Œç¾å®Ÿã®å³ã—ã•ã€ã‚ˆã‚Šã‚‚ã€Œæ¸©ã‹ã„ã”é£¯ã€ãŒå¿…è¦ã§ã™ã€‚ç·Šå¼µæ„Ÿã«è€ãˆã‚‰ã‚Œã¾ã›ã‚“ã€‚" },
            en: { title: "The Chill Group", desc: "Relaxing with friends.", rec: "Taiwan", match: "æµ„å®‰å­¤éŠ", matchReason: "Their hidden gems upgrade your trip.", ng: "Slum Tour", ngReason: "You need comfort food, not harsh reality." }
        },
        "æµ„å®‰å…±å¾‹": { 
            ja: { title: "ç‹é“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ„ã‚¢ãƒ¼å®¢", desc: "å®‰å¿ƒãƒ»å®‰å…¨ãŒè‡³é«˜ã€‚", rec: "ã‚¤ã‚¿ãƒªã‚¢ï¼ˆå‘¨éŠï¼‰", match: "æµ„å®‰å­¤å¾‹", matchReason: "ãŠäº’ã„ã«ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‹ã®ã§ã€ãƒˆãƒ©ãƒ–ãƒ«çŸ¥ã‚‰ãšã®å¹³å’Œãªæ—…ã«ãªã‚Šã¾ã™ã€‚", ng: "å—ç±³ã®ãƒ’ãƒƒãƒãƒã‚¤ã‚¯", ngReason: "ã€Œæ˜æ—¥ã©ã“ã«æ³Šã¾ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ã€ã¨ã„ã†ä¸å®‰ã§ã€å¤œã‚‚çœ ã‚Œãªããªã‚Šã¾ã™ã€‚" },
            en: { title: "The Package Tourist", desc: "Safety is supreme.", rec: "Italy", match: "æµ„å®‰å­¤å¾‹", matchReason: "You both follow rules, ensuring a peaceful trip.", ng: "Hitchhiking", ngReason: "Uncertainty keeps you awake at night." }
        }
    };

    const questions = [
        { ja: "çµ¶æ™¯ã®ãŸã‚ãªã‚‰ã€ã‚·ãƒ£ãƒ¯ãƒ¼ã®ãªã„ä¸è¡›ç”Ÿãªå®¿ã§ã‚‚æˆ‘æ…¢ã§ãã‚‹ã€‚", en: "I can endure poor hygiene for a great view.", pos: { mud: 2, active: 1 }, neg: { clean: 2, safe: 1 } },
        { ja: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯æ±ºã‚ãšã€ãã®å ´ã®æ°—åˆ†ã§å‹•ããŸã„ã€‚", en: "I prefer spontaneity over planning.", pos: { flow: 2, safe: 0.5 }, neg: { order: 2, active: 0.5 } },
        { ja: "å®‰å…¨ãªãƒªã‚¾ãƒ¼ãƒˆã‚ˆã‚Šã€å°‘ã—å±é™ºãªè·¯åœ°è£ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã€‚", en: "Gritty alleys excite me more than safe resorts.", pos: { active: 2, mud: 1 }, neg: { safe: 2, clean: 1 } },
        { ja: "é£Ÿäº‹ã¯å€‹å®¤ã‚ˆã‚Šã‚‚ã€ç¾åœ°ã®äººã¨ç›¸å¸­ã«ãªã‚‹ã‚ˆã†ãªåº—ãŒã„ã„ã€‚", en: "I prefer lively local eateries over private dining.", pos: { social: 2, mud: 0.5 }, neg: { solo: 2, clean: 0.5 } },
        { ja: "ãƒˆãƒ©ãƒ–ãƒ«ï¼ˆé›»è»Šé…å»¶ãªã©ï¼‰ã‚‚ã€Œé¢ç™½ã„å±•é–‹ã€ã ã¨æ¥½ã—ã‚ã‚‹ã€‚", en: "Travel troubles are interesting twists, not panic.", pos: { flow: 2, active: 1 }, neg: { order: 2, safe: 1 } },
        { ja: "è¨€è‘‰ãŒé€šã˜ãªã„å ´æ‰€ã§ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼äº¤æ¸‰ã¯æ¥½ã—ã„ã€‚", en: "Communicating with gestures is fun.", pos: { active: 2, social: 1 }, neg: { safe: 2, solo: 1 } },
        { ja: "äºˆç®—ãŒã‚ã‚Œã°ã€é«˜ç´šãƒ›ãƒ†ãƒ«ã‚ˆã‚Šã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«ä½¿ã„ãŸã„ã€‚", en: "I spend extra budget on activities, not hotels.", pos: { active: 2, mud: 0.5 }, neg: { clean: 2, safe: 0.5 } },
        { ja: "èª°ã¨ã‚‚è©±ã•ãšå¤§è‡ªç„¶ã§ä¸€äººãã‚Šã€‚ãã‚Œã¯è‡³ç¦ã®æ™‚é–“ã ã€‚", en: "Being alone in nature is bliss.", pos: { solo: 2, mud: 1 }, neg: { social: 2, safe: 1 } },
        { ja: "è¦‹ãŸã“ã¨ã®ãªã„è¬ã®å±‹å°æ–™ç†ã‚‚ã€è¿·ã‚ãšé£Ÿã¹ã‚‹ã€‚", en: "I try mysterious street food without hesitation.", pos: { mud: 2, active: 1 }, neg: { clean: 2, safe: 1 } },
        { ja: "æ—…ã®ç›®çš„ã¯ã€Œç™’ã‚„ã—ã€ã‚ˆã‚Šã€Œä¾¡å€¤è¦³ã‚’å£Šã™åˆºæ¿€ã€ã ã€‚", en: "Travel is for culture shock, not relaxation.", pos: { active: 2, flow: 1 }, neg: { safe: 2, order: 1 } },
        { ja: "è‡ªåˆ†ã«åˆã‚ã›ã¦ãã‚Œã‚‹äººã‚ˆã‚Šã€æŒ¯ã‚Šå›ã—ã¦ãã‚‹äººãŒã„ã„ã€‚", en: "I prefer crazy travel companions over passive ones.", pos: { flow: 2, social: 1 }, neg: { order: 2, solo: 1 } },
        { ja: "è·é€ ã‚Šã¯ã€Œã‚‚ã—ã‚‚ã€ã‚’è€ƒãˆã¦å¤šããªã‚‹æ–¹ã ã€‚", en: "I overpack for 'what if' scenarios.", pos: { order: 2, safe: 1 }, neg: { flow: 2, mud: 1 } },
        { ja: "æ¯æœã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã¯æ—…å…ˆã§ã‚‚å®ˆã‚ŠãŸã„ã€‚", en: "I keep my morning routine even when traveling.", pos: { order: 2, clean: 0.5 }, neg: { flow: 2, active: 0.5 } }
    ];
    const optionsData = [
        { ja: "å®Œå…¨ã«ãã†æ€ã†", en: "Strongly Agree", weight: 1.0, type: "pos" },
        { ja: "ã‚„ã‚„ãã†æ€ã†", en: "Agree", weight: 0.5, type: "pos" },
        { ja: "ã©ã¡ã‚‰ã§ã‚‚ãªã„", en: "Neutral", weight: 0, type: "neu" },
        { ja: "ã‚ã¾ã‚Šãã†æ€ã‚ãªã„", en: "Disagree", weight: 0.5, type: "neg" },
        { ja: "å…¨ããã†æ€ã‚ãªã„", en: "Strongly Disagree", weight: 1.0, type: "neg" }
    ];

    let currentQIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);

    function toggleLanguage() {
        currentLang = currentLang === 'ja' ? 'en' : 'ja';
        document.getElementById('lang-btn').innerText = currentLang === 'ja' ? "ğŸ‡¯ğŸ‡µ JP / ğŸ‡ºğŸ‡¸ EN" : "ğŸ‡ºğŸ‡¸ EN / ğŸ‡¯ğŸ‡µ JP";
        updateUIText();
    }
    
    function updateUIText() {
        const t = translations[currentLang];
        document.getElementById('start-title').innerText = t.title;
        document.getElementById('start-subtitle').innerHTML = t.subtitle;
        document.getElementById('start-btn-text').innerText = t.startBtn;
        document.getElementById('btn-next').innerText = t.btnNext;
        document.getElementById('btn-back').innerText = t.btnBack;
        document.getElementById('label-rec').innerText = t.labelRec;
        document.getElementById('label-ng').innerText = t.labelNg;
        document.getElementById('label-match').innerText = t.labelMatch;
        document.getElementById('pre-title').innerText = t.preTitle;
        document.getElementById('pre-subtitle').innerHTML = t.preSubtitle;
        document.getElementById('show-result-btn-text').innerText = t.showResultBtn;
        document.getElementById('btn-top').innerText = t.btnTop;
        document.getElementById('btn-details').innerText = t.btnDetails;
        document.getElementById('feedback-msg').innerHTML = t.feedbackMsg;
        document.getElementById('feedback-btn').innerText = t.feedbackBtn;
        document.getElementById('axis-clean').innerText = t.axes.clean;
        document.getElementById('axis-mud').innerText = t.axes.mud;
        document.getElementById('axis-safe').innerText = t.axes.safe;
        document.getElementById('axis-active').innerText = t.axes.active;
        document.getElementById('axis-solo').innerText = t.axes.solo;
        document.getElementById('axis-social').innerText = t.axes.social;
        document.getElementById('axis-order').innerText = t.axes.order;
        document.getElementById('axis-flow').innerText = t.axes.flow;

        if (!document.getElementById('quiz-screen').classList.contains('hidden')) renderQuestion();
        else if (!document.getElementById('result-screen').classList.contains('hidden')) {
            const kanji = document.getElementById('result-kanji').innerText.replace(/[ã€ã€‘]/g, '');
            if(resultData[kanji]) {
                const data = resultData[kanji][currentLang];
                document.getElementById('result-title').innerText = data.title;
                document.getElementById('result-desc-text').innerText = data.desc;
                document.getElementById('result-rec').innerText = data.rec;
                document.getElementById('result-match').innerText = `ã€${data.match}ã€‘`;
                document.getElementById('match-reason-text').innerText = data.matchReason;
                document.getElementById('result-ng-place').innerText = data.ng;
                document.getElementById('result-ng-reason').innerText = data.ngReason;
            }
        }
    }

    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQIndex];
        document.getElementById('question-text').innerText = `Q${currentQIndex + 1}. ${q[currentLang]}`;
        const pct = (currentQIndex / questions.length) * 100;
        document.getElementById('progress').style.width = `${pct}%`;
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        optionsData.forEach((opt, idx) => {
            const label = document.createElement('label'); label.className = 'option-label';
            if (userAnswers[currentQIndex] === idx) label.classList.add('selected');
            const radio = document.createElement('input'); radio.type = 'radio'; radio.name = 'q-option'; radio.className = 'option-radio'; radio.value = idx; radio.checked = (userAnswers[currentQIndex] === idx);
            radio.onclick = () => { userAnswers[currentQIndex] = idx; renderQuestion(); };
            const span = document.createElement('span'); span.innerText = opt[currentLang];
            label.appendChild(radio); label.appendChild(span); container.appendChild(label);
        });
        document.getElementById('btn-back').style.visibility = (currentQIndex === 0) ? 'hidden' : 'visible';
        document.getElementById('btn-next').disabled = (userAnswers[currentQIndex] === null);
    }

    function nextQuestion() {
        currentQIndex++;
        if (currentQIndex < questions.length) renderQuestion();
        else {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('pre-result-screen').classList.remove('hidden');
        }
    }
    function prevQuestion() { if (currentQIndex > 0) { currentQIndex--; renderQuestion(); } }

    function toggleDetails() {
        const content = document.getElementById('details-section');
        content.classList.toggle('open');
        const t = translations[currentLang];
        document.getElementById('btn-details').innerText = content.classList.contains('open') ? (currentLang === 'ja' ? 'â–² è©³ç´°ã‚’é–‰ã˜ã‚‹' : 'â–² Close Details') : t.btnDetails;
    }

    function calcAndShowResults() {
        let scores = { mud: 0, clean: 0, active: 0, safe: 0, social: 0, solo: 0, flow: 0, order: 0 };
        userAnswers.forEach((optIdx, qIdx) => {
            const q = questions[qIdx]; const opt = optionsData[optIdx];
            if (opt.type === 'pos') { for (const [k, v] of Object.entries(q.pos)) scores[k] += v * opt.weight; }
            else if (opt.type === 'neg') { for (const [k, v] of Object.entries(q.neg)) scores[k] += v * opt.weight; }
        });
        const mbti = document.getElementById('mbti-select').value;
        if (mbti && mbti.length === 4) {
            if (mbti[0] === 'E') scores.social += 2; else if (mbti[0] === 'I') scores.solo += 2;
            if (mbti[1] === 'S') scores.clean += 2; else if (mbti[1] === 'N') scores.mud += 2;
            if (mbti[3] === 'J') scores.order += 2; else if (mbti[3] === 'P') scores.flow += 2;
        }
        const axis1 = scores.mud - scores.clean; const axis2 = scores.active - scores.safe; const axis3 = scores.social - scores.solo; const axis4 = scores.flow - scores.order;
        let finalId = "";
        finalId += axis1 > 0 ? "æ³¥" : "æµ„"; finalId += axis2 > 0 ? "æ”»" : "å®‰"; finalId += axis3 > 0 ? "å…±" : "å­¤"; finalId += axis4 > 0 ? "éŠ" : "å¾‹";

        document.getElementById('pre-result-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        const data = resultData[finalId][currentLang];
        document.getElementById('result-kanji').innerText = `ã€${finalId}ã€‘`;
        document.getElementById('result-title').innerText = data.title;
        document.getElementById('result-desc-text').innerText = data.desc;
        document.getElementById('result-rec').innerText = data.rec;
        document.getElementById('result-match').innerText = `ã€${data.match}ã€‘`;
        document.getElementById('match-reason-text').innerText = data.matchReason;
        document.getElementById('result-ng-place').innerText = data.ng;
        document.getElementById('result-ng-reason').innerText = data.ngReason;
        document.getElementById('result-image').src = `./images/${finalId}.png`;
        
        const maxScore = 15;
        const setDot = (elementId, netScore) => {
            let val = Math.max(-maxScore, Math.min(maxScore, netScore));
            let percent = ((val + maxScore) / (maxScore * 2)) * 100;
            percent = Math.max(5, Math.min(95, percent));
            setTimeout(() => { document.getElementById(elementId).style.left = `${percent}%`; }, 100);
        };
        setDot('dot-1', axis1); setDot('dot-2', axis2); setDot('dot-3', axis3); setDot('dot-4', axis4);
    }
</script>
</body>
</html>